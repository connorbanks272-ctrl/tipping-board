<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tipping Board Competition Edition</title>
<style>
body {
  margin:0;
  background:#001d3d;
  color:white;
  font-family:Arial;
  text-align:center;
}
h1 { margin:10px; }
canvas {
  background:#0a2540;
  border:4px solid #00b4d8;
  border-radius:12px;
  display:block;
  margin:0 auto;
  touch-action: manipulation;
}
button {
  padding:10px 20px;
  margin:5px;
  font-size:16px;
  border:none;
  border-radius:8px;
  background:#ff0054;
  color:white;
}
</style>
</head>
<body>

<h1>üéØ TIPPING BOARD üéØ</h1>
<h3>Score: <span id="score">0</span></h3>
<p>Pick a side to drop your coin</p>
<button onclick="dropCoin('left')">‚¨ÖÔ∏è Left</button>
<button onclick="dropCoin('middle')">‚¨áÔ∏è Middle</button>
<button onclick="dropCoin('right')">‚û°Ô∏è Right</button>
<button onclick="resetGame()">Reset</button>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = 400;
canvas.height = 600;

let pegs = [];
let fallingCoin = null;
let score = 0;

// Prize sections at the bottom
const sections = [
  {x: 0, width: 133, points: 10, color: "#ff595e"},
  {x: 133, width: 134, points: 20, color: "#1982c4"},
  {x: 267, width: 133, points: 50, color: "#8ac926"}
];

// Setup pegs in staggered pattern
function setup() {
  pegs = [];
  for (let y = 100; y < 500; y += 40) {
    for (let x = 40; x < 360; x += 40) {
      pegs.push({x: x + (y % 80 === 0 ? 20 : 0), y});
    }
  }
  fallingCoin = null;
}

function drawPegs() {
  ctx.fillStyle = "#90e0ef";
  pegs.forEach(p => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, 5, 0, Math.PI*2);
    ctx.fill();
  });
}

function drawFalling() {
  if (!fallingCoin) return;
  ctx.fillStyle = "#ffd60a";
  ctx.beginPath();
  ctx.arc(fallingCoin.x, fallingCoin.y, 10, 0, Math.PI*2);
  ctx.fill();
}

function drawSections() {
  sections.forEach(s => {
    ctx.fillStyle = s.color;
    ctx.fillRect(s.x, 550, s.width, 50);
    ctx.fillStyle = "white";
    ctx.font = "16px Arial";
    ctx.fillText(s.points, s.x + s.width/2 - 10, 580);
  });
}

function update() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  drawPegs();
  drawSections();
  drawFalling();

  if (fallingCoin) {
    fallingCoin.y += 2; // slower falling

    // Bounce off pegs
    pegs.forEach(p => {
      const dx = fallingCoin.x - p.x;
      const dy = fallingCoin.y - p.y;
      const dist = Math.sqrt(dx*dx + dy*dy);
      if (dist < 12) {
        fallingCoin.x += (Math.random() < 0.5 ? -1 : 1) * Math.random() * 15;
        fallingCoin.y -= 1; // slight bounce
      }
    });

    // Check if coin reached bottom
    if (fallingCoin.y >= 550) {
      sections.forEach(s => {
        if (fallingCoin.x >= s.x && fallingCoin.x <= s.x + s.width) {
          score += s.points;
          alert(`You won ${s.points} points!`);
          document.getElementById("score").innerText = score;
        }
      });
      fallingCoin = null; // remove coin
    }
  }

  requestAnimationFrame(update);
}

function dropCoin(side) {
  if (fallingCoin) return; // only one coin at a time

  let x;
  if (side === 'left') x = 50;
  else if (side === 'middle') x = 200;
  else if (side === 'right') x = 350;

  fallingCoin = {x: x, y: 50};
}

function resetGame() {
  score = 0;
  document.getElementById("score").innerText = score;
  setup();
}

setup();
update();
</script>

</body>
</html>
