<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tipping Board TV Edition</title>
<style>
body {
  margin:0;
  background:#001d3d;
  color:white;
  font-family:Arial;
  text-align:center;
}
h1 { margin:10px; }
canvas {
  background:#0a2540;
  border:4px solid #00b4d8;
  border-radius:12px;
  display:block;
  margin:0 auto;
  touch-action: manipulation;
}
button {
  padding:10px 20px;
  margin:10px;
  font-size:16px;
  border:none;
  border-radius:8px;
  background:#ff0054;
  color:white;
}
</style>
</head>
<body>

<h1>ðŸŽ¯ TIPPING BOARD ðŸŽ¯</h1>
<h3>Score: <span id="score">0</span></h3>
<button onclick="resetGame()">Reset</button>
<p>Tap anywhere on the board</p>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = 400;
canvas.height = 600;

let pegs = [];
let coins = [];
let falling = [];
let score = 0;

function setup() {
  pegs = [];
  for (let y = 100; y < 400; y += 40) {
    for (let x = 40; x < 360; x += 40) {
      pegs.push({x: x + (y % 80 === 0 ? 20 : 0), y});
    }
  }

  coins = [];
  for (let i = 0; i < 12; i++) {
    coins.push({x: 40 + i * 28, y: 520});
  }
}

function drawPegs() {
  ctx.fillStyle = "#90e0ef";
  pegs.forEach(p => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, 5, 0, Math.PI*2);
    ctx.fill();
  });
}

function drawCoins() {
  ctx.fillStyle = "#ffd60a";
  coins.forEach(c => {
    ctx.beginPath();
    ctx.arc(c.x, c.y, 10, 0, Math.PI*2);
    ctx.fill();
  });
}

function drawFalling() {
  ctx.fillStyle = "#ff8500";
  falling.forEach(c => {
    ctx.beginPath();
    ctx.arc(c.x, c.y, 8, 0, Math.PI*2);
    ctx.fill();
  });
}

function update() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  drawPegs();
  drawCoins();

  falling.forEach(c => {
    c.y += 4;

    pegs.forEach(p => {
      let dx = c.x - p.x;
      let dy = c.y - p.y;
      if (Math.sqrt(dx*dx + dy*dy) < 10) {
        c.x += (Math.random() - 0.5) * 20;
      }
    });

    if (c.y > 500) {
      coins.forEach(coin => {
        if (Math.abs(c.x - coin.x) < 20) {
          coin.x += 15;
        }
      });
      c.y = 1000;
    }
  });

  coins.forEach(coin => {
    if (coin.x > 390) {
      score++;
      document.getElementById("score").innerText = score;
      coin.x = -100;
    }
  });

  falling = falling.filter(c => c.y < 600);
  coins = coins.filter(c => c.x > -50);

  drawFalling();

  requestAnimationFrame(update);
}

function resetGame() {
  score = 0;
  document.getElementById("score").innerText = score;
  setup();
}

canvas.addEventListener("touchstart", function(e){
  const rect = canvas.getBoundingClientRect();
  const x = e.touches[0].clientX - rect.left;
  falling.push({x:x, y:50});
});

canvas.addEventListener("click", function(e){
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  falling.push({x:x, y:50});
});

setup();
update();
</script>

</body>
</html>
