<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WinMore Tipping Board</title>
<style>
body {
  margin:0;
  background:#111;
  color:white;
  font-family:Arial, sans-serif;
  text-align:center;
}
h1 {
  margin:10px;
  font-size:2em;
  color:white;
}
canvas {
  background:#222;
  border:4px solid #e63946;
  border-radius:12px;
  display:block;
  margin:0 auto;
  touch-action: manipulation;
}
button {
  padding:10px 20px;
  margin:5px;
  font-size:16px;
  border:none;
  border-radius:8px;
  background:#e63946;
  color:white;
  cursor:pointer;
}
</style>
</head>
<body>

<img src="22d66e0a-16c4-478a-a62d-4ea0c3826b6a.png" style="width:200px;margin:10px auto;display:block;">
<h1>üéØ WINMORE TIPPING BOARD üéØ</h1>
<h3>Score: <span id="score">0</span></h3>
<p>Pick a side to drop your coin</p>
<button onclick="dropCoin('left')">‚¨ÖÔ∏è Left</button>
<button onclick="dropCoin('middle')">‚¨áÔ∏è Middle</button>
<button onclick="dropCoin('right')">‚û°Ô∏è Right</button>
<button onclick="resetGame()">Reset</button>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = 400;
canvas.height = 600;

let pegs = [];
let fallingCoin = null;
let score = 0;

// 10 prize sections
const sectionCount = 10;
const sectionWidth = canvas.width / sectionCount;
const sections = [];
for (let i = 0; i < sectionCount; i++) {
  sections.push({
    x: i * sectionWidth,
    width: sectionWidth,
    points: (i + 1) * 10,
    color: "#8ac926"
  });
}

// Setup more dense, staggered pegs
function setup() {
  pegs = [];
  const rowCount = 12;
  const spacingX = 20;
  const spacingY = 30;

  for (let row = 0; row < rowCount; row++) {
    const y = 100 + row * spacingY;
    const isEvenRow = row % 2 === 0;
    for (let x = 25; x < 375; x += spacingX) {
      const offsetX = isEvenRow ? 0 : spacingX / 2;
      pegs.push({x: x + offsetX, y});
    }
  }
  fallingCoin = null;
}

// Draw pegs
function drawPegs() {
  ctx.fillStyle = "#f1faee";
  pegs.forEach(p => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, 4, 0, Math.PI*2);
    ctx.fill();
  });
}

// Draw falling coin - smaller size
function drawFalling() {
  if (!fallingCoin) return;
  ctx.fillStyle = "#ffcb05";
  ctx.beginPath();
  ctx.arc(fallingCoin.x, fallingCoin.y, 6, 0, Math.PI*2); // smaller radius
  ctx.fill();
}

// Draw prize sections
function drawSections() {
  sections.forEach(s => {
    ctx.fillStyle = s.color;
    ctx.fillRect(s.x, 550, s.width, 50);
    ctx.fillStyle = "white";
    ctx.font = "12px Arial";
    ctx.fillText(s.points, s.x + s.width/2 - 8, 580);
  });
}

// Main update loop
function update() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawPegs();
  drawSections();
  drawFalling();

  if (fallingCoin) {
    // Gravity
    fallingCoin.y += 2;
    // Slight horizontal drift
    fallingCoin.x += (Math.random() - 0.5) * 0.5;

    // Bounce off pegs
    pegs.forEach(p => {
      const dx = fallingCoin.x - p.x;
      const dy = fallingCoin.y - p.y;
      const dist = Math.sqrt(dx*dx + dy*dy);
      if (dist < 10) { // collision radius matches smaller coin
        const angle = Math.atan2(dy, dx);
        const bounceStrength = 1.5 + Math.random() * 1; // weaker bounce
        fallingCoin.x += Math.cos(angle) * bounceStrength;
        fallingCoin.y += Math.sin(angle) * bounceStrength;
      }
    });

    // Check for reaching bottom
    if (fallingCoin.y >= 550) {
      sections.forEach(s => {
        if (fallingCoin.x >= s.x && fallingCoin.x <= s.x + s.width) {
          score += s.points;
          alert(`You won ${s.points} points!`);
          document.getElementById("score").innerText = score;
        }
      });
      fallingCoin = null;
    }
  }

  requestAnimationFrame(update);
}

// Drop coin
function dropCoin(side) {
  if (fallingCoin) return;
  let x;
  if (side === 'left') x = 50 + Math.random() * 20;
  else if (side === 'middle') x = 200 + Math.random() * 20 - 10;
  else if (side === 'right') x = 350 + Math.random() * -20;

  fallingCoin = {x: x, y: 50};
}

// Reset game
function resetGame() {
  score = 0;
  document.getElementById("score").innerText = score;
  setup();
}

setup();
update();
</script>

</body>
</html>
